<!--
SPDX-FileCopyrightText: Copyright (C) 2017 Opal Health Informatics Group at the Research Institute of the McGill University Health Centre <john.kildea@mcgill.ca>

SPDX-License-Identifier: AGPL-3.0-or-later
-->

<div id="main">
    <div id="top">
        <div class="clearfix">
            <div class="row">
                <!-- Load side menu -->
                <div id="side-panel-scrollbar" class="col-lg-2">
                    <div ng-include="'templates/side-panel-menu.html'"></div>
                </div>
                <!-- Right side details view -->
                <div class="col-lg-10 animated fadeIn">
                    <div class="row main-title">
                        <!-- Page title -->
                        <div class="col-xs-12 col-md-8 title-content">
                            <span class="glyphicon glyphicon-time"></span>
                            <h1><strong>{{'CRON.PANEL.TITLE'|translate}}</strong></h1>
                        </div>
                        <!-- Breadcrumbs -->
                        <div class="col-md-4 title-breadcrumbs">
                            <span><a ui-sref="home">{{'BREADCRUMBS.HOME'|translate}}</a> <span class="glyphicon glyphicon-menu-right teflon"></span> <strong>{{'CRON.PANEL.TITLE'|translate}}</strong></span>
                        </div>
                    </div>
                    <!-- SECTION: Cron date & time -->
                    <div ng-if="writeAccess" class="row">
                        <div class="col-xs-12 col-md-6">
                            <div class="row">
                                <div class="col-xs-12 side-menu-title">
                                    <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                                        <span style="background-color:#e6edfa; padding-right: 10px">
                                            <span class="fas fa-dot-circle"></span>
                                            <h2>{{'CRON.PANEL.DATE_TIME'|translate}}</h2>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 15px;">
                                <div class="col-xs-12">
                                    <p style="margin-bottom: 10px;">
                                        {{'CRON.PANEL.DATE_TIME_EXPLANATION'|translate}}
                                    </p>
                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 15px;">
                                <div class="col-xs-12 col-sm-10">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-6" style="padding-top: 10px;margin-bottom:20px;">
                                            <p class="input-group">
                                                <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="cronDetailsMod.nextCronDate" is-open="opened" min="minDate" ng-change="setChangesMade()" datepicker-options="dateOptions" ng-required="true" close-text="{{'DATEPICKER.CLOSE'|translate}}" current-text="{{'DATEPICKER.TODAY'|translate}}" clear-text="{{'DATEPICKER.RESET'|translate}}" />
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </p>
                                        </div>
                                        <div class="col-xs-3 col-sm-3" style="margin-top: -24px;">
                                            <div>
                                                <div uib-timepicker ng-model="cronDetailsMod.nextCronTime" ng-change="setChangesMade()" minute-step="5" show-meridian="false"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3">
                                            <div class="panel-buttons">
                                                <input class="btn btn-primary" type="button" value="{{'CRON.PANEL.SAVE'|translate}}" ng-class="{'disabled': !checkForm()}" ng-click="submitCronChange()">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-md-6">
                            <!-- SECTION: Repeat interval -->
                            <div class="row">
                                <div class="col-xs-12 side-menu-title">
                                    <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                                        <span style="background-color:#e6edfa; padding-right: 10px">
                                            <span class="fas fa-dot-circle"></span>
                                            <h2>{{'CRON.PANEL.REPEAT'|translate}}</h2>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row ">
                                <div class="col-xs-12">
                                    <p style="margin-bottom: 10px;">
                                        {{'CRON.PANEL.REPEAT_EXPLANATION'|translate}} <strong>{{cronDetails.repeatInterval}} {{cronDetails.repeatUnits}}</strong>
                                    </p>
                                </div>
                            </div>
                            <div class="row ">
                                <div class="col-xs-12">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-5" style="margin-bottom:10px;">
                                            <select ng-model="cronDetailsMod.repeatUnits" ng-change="setChangesMade()" ng-options="unit for unit in repeatUnits" class="form-control" ></select>
                                        </div>
                                        <div class="col-xs-3 col-sm-3" style="margin-bottom:10px;">
                                            <div>
                                                <input class="form-control" ng-model="cronDetailsMod.repeatInterval" ng-change="setChangesMade()" type="number" max="59" min="1" required="required">
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3" style="margin-bottom:10px;">
                                            <div>
                                                <input class="btn btn-primary" type="button" value="{{'CRON.PANEL.SAVE'|translate}}" ng-class="{'disabled': !checkForm()}" ng-click="submitCronChange()">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END SECTION -->
                        </div>
                    </div>
                    <div class="panel-container">
                        <div class="panel-info">
                            <p style="font-size:30px;">{{'CHART_UNAVAILABLE'|translate}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bannerMessage alert-success">{{bannerMessage}}</div>
</div>