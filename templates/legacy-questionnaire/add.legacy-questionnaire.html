  <div id="main">
    <div id="top">
      <div class="clearfix">
        <div class="row">
          <!-- Left side view -->
          <div class="col-lg-2">
            <!-- Logo -->
            <div class="side-navbar" ng-controller="navigation">
              <div class="row side-logo" ng-click="goToHome()">
                <div class="col-md-12">
                  <div class="logo">
                    <img style="margin-top: -20px;" class="animated rotateIn" src="images/opal_logo_transparent_purple.png" height="130" width="130">
                  </div>
                  <h1 class="animated fadeIn">opal <strong>ADMIN</strong></h1>
                </div>
              </div>   
            </div>
            <div class="summary-fix">  
              <!-- Back button -->
              <div class="row side-panel-menu">
                <div class="col-xs-12 col-sm-5 col-lg-12">
                  <div class="panel-container animated" ng-class="{pulse: hoverBack}" ng-mouseenter="hoverBack=true" ng-mouseleave="hoverBack=false" style="cursor:pointer;" ng-click="goBack()">
                    <div class="side-panel-info-sm">
                      <div class="panel-content">
                        <span style="font-size: 23px;vertical-align:middle" class="fa fa-arrow-left" aria-hidden="true"></span>
                        <h6 class="side-panel-title" style="display:inline-block;margin:0;font-size:14px;"><strong>Back to Legacy Questionnaires</strong></h6>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Summary -->
                <div class="side-menu-title col-lg-12">
                  <div class="horz-line" style="height: 16px; text-align: center">
                    <span style="background-color:#e6edfa; padding: 0 10px;">
                      <h2>Summary</h2>
                    </span>  
                  </div>  
                </div>
                <div class="col-lg-12">
                  <div class="progress progress-striped active">
                    <div class="progress-bar" ng-class="{'progress-bar-success': stepProgress == 100}" role="progressbar" aria-valuenow="{{stepProgress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{stepProgress}}%">
                    </div>
                  </div>
                </div>
              </div>
              <uib-accordion class="side-navbar">
                <!-- SECTION: Legacy Questionnaire -->
                <div uib-accordion-group is-open="legacyQuestionnaireSection.open" class="panel-container summary-box" is-disabled="!newLegacyQuestionnaire.legacy_questionnaire">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="newLegacyQuestionnaire.legacy_questionnaire" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Legacy Questionnaire</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': type.open, 'glyphicon-chevron-right': !type.open}" ng-if="newLegacyQuestionnaire.legacy_questionnaire"></i>
                      </div>
                    </div>
                  </uib-accordion-heading> 
                  <div ng-if="newLegacyQuestionnaire.legacy_questionnaire" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      {{newLegacyQuestionnaire.legacy_questionnaire.name}}
                    </p>
                  </div>
                </div>
                <!-- SECTION: Title -->
                <div uib-accordion-group is-open="titleSection.open" class="panel-container summary-box animated" ng-class="{fadeInUp: titleSection.show}" is-disabled="!newLegacyQuestionnaire.name_EN && !newLegacyQuestionnaire.name_FR" ng-if="titleSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="newLegacyQuestionnaire.name_EN && newLegacyQuestionnaire.name_FR" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Title</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down':titleSection.open, 'glyphicon-chevron-right':!titleSection.open}" ng-if="newLegacyQuestionnaire.name_EN || newLegacyQuestionnaire.name_FR"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="newLegacyQuestionnaire.name_EN" class="description">
                    <p style="margin-bottom:5px;">
                      <strong>EN</strong>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      {{newLegacyQuestionnaire.name_EN}}
                    </p>
                  </div>
                  <div ng-if="newLegacyQuestionnaire.name_FR" class="description">
                    <p style="margin-bottom:5px;">
                      <strong>FR</strong>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      {{newLegacyQuestionnaire.name_FR}}
                    </p>
                  </div>
                </div>
                <!-- SECTION: Introduction Text -->
                <div uib-accordion-group is-open="introSection.open" class="panel-container summary-box animated" ng-class="{fadeInUp:introSection.show}" ng-if="introSection.show" is-disabled="!newLegacyQuestionnaire.intro_EN && !newLegacyQuestionnaire.intro_FR">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="newLegacyQuestionnaire.intro_EN && newLegacyQuestionnaire.intro_FR" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Introduction Text</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': introSection.open, 'glyphicon-chevron-right': !introSection.open}" ng-if="newLegacyQuestionnaire.intro_EN || newLegacyQuestionnaire.body.FR"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="newLegacyQuestionnaire.intro_EN || newLegacyQuestionnaire.intro_FR" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      See rendered output on the right
                    </p>
                  </div>
                </div>
                <!-- SECTION: Publish Frequency -->
                <div uib-accordion-group is-open="publishFrequencySection.open" class="panel-container summary-box animated" ng-class="{fadeInUp:publishFrequencySection.show}" is-disabled="!showFrequency" ng-if="publishFrequencySection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkFrequencyFilter() && showFrequency" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Publish Frequency</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': publishFrequencySection.open, 'glyphicon-chevron-right': !publishFrequencySection.open}"
                         ng-if="showFrequency"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="showFrequency" class="description">
                    <p style="margin-bottom:5px;">
                      <strong>Repeat</strong><br>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      <span ng-if="!showFrequency">N/A</span>
                      <span ng-if="frequencySelected.id != 'custom' && showFrequency">{{frequencySelected.name}}</span>
                      <span ng-if="frequencySelected.id == 'custom'">
                        Every 
                        <span ng-if="customFrequency.meta_value != 1">{{customFrequency.meta_value}}</span>
                        {{customFrequency.unit.name}} 
                        <span ng-if="selectedDaysInWeek.length">On {{selectedDaysInWeekText}}</span>
                        <span ng-if="selectedMonthsInYear.length">in {{selectedMonthsInYearText}} </span>
                        <span ng-if="selectedDatesInMonth.length">on the {{selectedDatesInMonthText}} of
                          <span ng-if="selectedMonthsInYear.length > 1">each</span>
                          <span ng-if="selectedMonthsInYear.length < 2">the</span>
                        month</span>
                        <span ng-if="selectedWeekNumberInMonth.id && selectedSingleDayInWeek.id">on the {{selectedWeekNumberInMonthText}} {{selectedSingleDayInWeekText}} of 
                        <span ng-if="selectedMonthsInYear.length > 1">each</span>
                        <span ng-if="selectedMonthsInYear.length < 2">the</span>
                          month</span>
                      </span>
                    </p>
                  </div>
                  <div ng-if="showFrequency" class="description">
                    <p style="margin-bottom:5px;">
                      <strong>Repeat Start</strong><br>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      <span ng-if="newLegacyQuestionnaire.occurrence.start_date">
                        {{newLegacyQuestionnaire.occurrence.start_date | date:'fullDate' }}
                      </span>
                      <span ng-if="!newLegacyQuestionnaire.occurrence.start_date">N/A</span>
                    </p>
                  </div>
                  <div ng-if="showFrequency" class="description">
                    <p style="margin-bottom:5px;">
                      <strong>Repeat End</strong><br>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      <span ng-if="newLegacyQuestionnaire.occurrence.end_date">
                        {{newLegacyQuestionnaire.occurrence.end_date | date:'fullDate' }}
                      </span>
                      <span ng-if="!newLegacyQuestionnaire.occurrence.end_date">Never</span>
                    </p>
                  </div>
                </div>

                <!-- SECTION: Patient triggers -->
                 <div uib-accordion-group is-open="triggerSection.patient.open" class="panel-container summary-box animated" ng-class="{fadeInUp:triggerSection.show}" is-disabled="!checkTriggers(patientTriggerList)" ng-if="triggerSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkTriggers(patientTriggerList)" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Patient Trigger(s)</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': triggerSection.patient.open, 'glyphicon-chevron-right': !triggerSection.patient.open}" ng-if="checkTriggers(patientTriggerList)"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="checkTriggers(patientTriggerList) && !selectAll.patient.all" class="description">
                    <p>
                      <ul style="max-height: 100px; overflow-y: auto;">
                        <li ng-repeat="patient in patientTriggerList | filter: {added: 1} : 1">
                          {{patient.name}}
                        </li>
                      </ul>
                    </p>
                  </div>
                  <div ng-if="selectAll.patient.all" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                        Send to all patients
                    </p>
                  </div>
                </div>
                <!-- SECTION: Demographic trigger -->
                <div uib-accordion-group is-open="demoSection.open " class="panel-container summary-box animated" ng-class="{fadeInUp:demoSection.open }" is-disabled="!demoTrigger.sex && demoTrigger.age.min == 0 && demoTrigger.age.max == 100" ng-if="demoSection.show ">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="demoTrigger.sex || demoTrigger.age.min != 0 || demoTrigger.age.max != 100" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Demographic Trigger(s)</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down':demoSection.open , 'glyphicon-chevron-right':!demoSection.open }" ng-if="demoTrigger.sex || demoTrigger.age.min != 0 || demoTrigger.age.max != 100"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="demoTrigger.sex" class="description">
                    <p>
                      <strong>Sex</strong>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      {{demoTrigger.sex}}
                    </p>
                  </div>
                  <div ng-if="demoTrigger.age.min != 0 || demoTrigger.age.max != 100" class="description">
                    <p>
                      <strong>Age Group</strong>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                      {{demoTrigger.age.min}} to {{demoTrigger.age.max}} 
                    </p>
                  </div>
								</div>
                <!-- SECTION: Appointment Status trigger -->
                <div uib-accordion-group is-open="triggerSection.appointmentStatus.open" class="panel-container summary-box animated" ng-class="{fadeInUp:triggerSection.show}" is-disabled="!checkTriggers(appointmentStatusList)" ng-if="triggerSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkTriggers(appointmentStatusList)" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Appointment Status Trigger</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': triggerSection.appointmentStatus.open, 'glyphicon-chevron-right': !triggerSection.appointmentStatus.open}" ng-if="checkTriggers(appointmentStatusList)"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="checkTriggers(appointmentStatusList)" class="description">
                    <p>
                      <ul style="max-height: 100px; overflow-y: auto;">
                        <li ng-repeat="appointmentStatus in appointmentStatusList | filter: {added: 1} : 1">
                          {{appointmentStatus.name}}
                        </li>
                      </ul>
                    </p>
                  </div>
                </div>
                <!-- SECTION: Appointment triggers -->
                <div uib-accordion-group is-open="triggerSection.appointment.open" class="panel-container summary-box animated" ng-class="{fadeInUp:triggerSection.show}" is-disabled="!checkTriggers(appointmentTriggerList)" ng-if="triggerSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkTriggers(appointmentTriggerList)" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Appointment Trigger(s)</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': triggerSection.appointment.open, 'glyphicon-chevron-right': !triggerSection.appointment.open}" ng-if="checkTriggers(appointmentTriggerList)"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="checkTriggers(appointmentTriggerList) && !selectAll.appointment.all" class="description">
                    <p>
                      <ul style="max-height: 100px; overflow-y: auto;">
                        <li ng-repeat="appointment in appointmentTriggerList | filter: {added: 1} : 1">
                          {{appointment.name}}
                        </li>
                      </ul>
                    </p>
                  </div>
                  <div ng-if="selectAll.appointment.all" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                        All appointments
                    </p>
                  </div>
                </div>
                <!-- SECTION: Diagnosis triggers -->
                <div uib-accordion-group is-open="triggerSection.diagnosis.open" class="panel-container summary-box animated" ng-class="{fadeInUp:triggerSection.show}" is-disabled="!checkTriggers(dxTriggerList)" ng-if="triggerSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkTriggers(dxTriggerList)" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Diagnosis Trigger(s)</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': triggerSection.diagnosis.open, 'glyphicon-chevron-right': !triggerSection.diagnosis.open}" ng-if="checkTriggers(dxTriggerList)"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="checkTriggers(dxTriggerList) && !selectAll.diagnosis.all" class="description">
                    <p>
                      <ul style="max-height: 100px; overflow-y: auto;">
                        <li ng-repeat="dx in dxTriggerList | filter: {added: 1} : 1">
                          {{dx.name}}
                        </li>
                      </ul>
                    </p>
                  </div>
                  <div ng-if="selectAll.diagnosis.all" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                        All Diagnoses
                    </p>
                  </div>
                </div>
                <!-- SECTION: Doctor triggers -->
                <div uib-accordion-group is-open="triggerSection.doctor.open" class="panel-container summary-box animated" ng-class="{fadeInUp:triggerSection.show}" is-disabled="!checkTriggers(doctorTriggerList)" ng-if="triggerSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkTriggers(doctorTriggerList)" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Doctor Trigger(s)</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': triggerSection.doctor.open, 'glyphicon-chevron-right': !triggerSection.doctor.open}" ng-if="checkTriggers(doctorTriggerList)"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="checkTriggers(doctorTriggerList) && !selectAll.doctor.all" class="description">
                    <p>
                      <ul style="max-height: 100px; overflow-y: auto;">
                        <li ng-repeat="doctor in doctorTriggerList | filter: {added: 1} : 1">
                          {{doctor.name}}
                        </li>
                      </ul>
                    </p>
                  </div>
                  <div ng-if="selectAll.doctor.all" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                        All Doctors
                    </p>
                  </div>
                </div>
                <!-- SECTION: Treatment Machine triggers -->
                <div uib-accordion-group is-open="triggerSection.machine.open" class="panel-container summary-box animated" ng-class="{fadeInUp:triggerSection.show}" is-disabled="!checkTriggers(machineTriggerList)" ng-if="triggerSection.show">
                  <uib-accordion-heading>
                    <div class="row" style="align-items: center">
                      <div class="col-md-2">
                        <span ng-if="checkTriggers(machineTriggerList)" style="color:#5cb85c" class="glyphicon glyphicon-ok"></span>
                      </div>
                      <div class="col-md-8">
                        <strong>Treatment Machine Trigger(s)</strong>
                      </div>
                      <div class="col-md-2">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': triggerSection.machine.open, 'glyphicon-chevron-right': !triggerSection.machine.open}" ng-if="checkTriggers(machineTriggerList)"></i>
                      </div>
                    </div>
                  </uib-accordion-heading>
                  <div ng-if="checkTriggers(machineTriggerList) && !selectAll.machine.all" class="description">
                    <p>
                      <ul style="max-height: 100px; overflow-y: auto;">
                        <li ng-repeat="machine in machineTriggerList | filter: {added: 1} : 1">
                          {{machine.name}}
                        </li>
                      </ul>
                    </p>
                  </div>
                  <div ng-if="selectAll.machine.all" class="description">
                    <p>
                      <span class="fa fa-angle-double-right" style="padding-right: 7px;"></span>
                        All Treatment Machines
                    </p>
                  </div>
                </div>
              </uib-accordion>
              <!-- Submit button -->
              <div class="panel-container">
                <a href="" ng-click="submitLegacyQuestionnaire()" class="btn btn-md item-button-success animated" ng-class="{pulse: hoverV}" ng-mouseenter="hoverV=true" ng-mouseleave="hoverV=false" ng-if="checkForm()" style="width: 100%;">
                  <span style="font-size: 20px;"><strong>Submit Legacy Questionnaire</strong></span>
                </a>
              </div>
            </div>
          </div>
          <!-- Right side detail view -->
          <div class="col-xs-12 col-lg-10 animated fadeInRight">
            <div class="row main-title">
              <!-- Page title -->
              <div class="col-xs-12 col-md-9 title-content">
                <span class="glyphicon glyphicon-plus"></span>
                <h1><strong>Add Legacy Questionnaire</strong></h1>
              </div>
              <!-- Breadcrumbs -->
              <div class="col-md-3 title-breadcrumbs"> 
                <span>
                  <span><a ui-sref="home">Home</a></span>
                  <span class="teflon glyphicon glyphicon-menu-right"></span> 
                  <span><a ui-sref="legacy-questionnaire">Legacy Questionnaires</a></span>
                  <span class="teflon glyphicon glyphicon-menu-right"></span> 
                  <span><strong>Add Legacy Questionnaire</strong></span>
                </span>
              </div>
            </div> 

            <div class="row mobile-side-panel-menu">
              <div class="back-menu col-xs-12 col-sm-5 col-lg-12">
                <div class="panel-container animated" ng-class="{pulse: hoverBack}" ng-mouseenter="hoverBack=true" ng-mouseleave="hoverBack=false" style="cursor:pointer;" ng-click="goBack()">
                  <div class="side-panel-info-sm">
                    <div class="panel-content">
                      <span style="font-size: 23px;vertical-align:middle" class="fa fa-arrow-left" aria-hidden="true"></span>
                      <h6 class="side-panel-title"><strong>Back to Legacy Questionnaires</strong></h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mobile-summary col-xs-12 col-sm-offset-1 col-sm-6" ng-if="!checkForm()">
                <div class="summary-title" style="text-align: right; margin-bottom: 5px;">
                  <span style="padding: 0 10px;">
                    <h2>Step {{numOfCompletedSteps}} of {{stepTotal}} Completed</h2>
                  </span>  
                </div>  
                <div class="progress progress-striped active">
                  <div class="progress-bar" ng-class="{'progress-bar-success': stepProgress == 100}" role="progressbar" aria-valuenow="{{stepProgress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{stepProgress}}%">
                  </div>
                </div>
              </div>
              <div class="mobile-summary col-xs-12 col-sm-offset-2 col-sm-5" ng-if="checkForm()">
                <div class="panel-container">
                  <a href="" ng-click="submitLegacyQuestionnaire()" class="btn btn-md item-button-success animated" ng-class="{pulse: hoverV}" ng-mouseenter="hoverV=true" ng-mouseleave="hoverV=false" ng-if="checkForm()" style="width: 100%;">
                    <span style="font-size: 20px;"><strong>Submit Legacy Questionnaire</strong></span>
                  </a>
                </div>
              </div> 
            </div>

            <!-- SECTION: Legacy Questionnaire -->
            <div class="row">
              <div class="col-xs-12 side-menu-title">
                <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                  <span style="background-color:#e6edfa; padding: 0 10px;">
                    <span class="fas fa-dot-circle"></span>
                    <h2>Legacy Questionnaire</h2>
                  </span>  
                </div>  
              </div>
            </div>   
            <div class="row">
              <div class="col-xs-12">
                <p style="margin-bottom: 10px;">
                  <span style="color:#d9534f"><strong>Required field:</strong></span>
                  Choose the legacy questionnaire to add.
                </p>
              </div>
            </div>  
            <div class="row"> 
              <div class="col-xs-12 col-md-8">
                <div class="panel-container">
                  <div class="panel-info">
                    <div class="panel-content">
                      <div class="panel-input">  
                        <div class="list-space">
                          <div class="input-group">
                            <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                            <input class="form-control" type="text" ng-model="legacyQuestionnaireFilter" ng-change="changeLegacyQuestionnaireFilter(legacyQuestionnaireFilter)" placeholder="Search Legacy Questionnaire"/>
                          </div>
                          <ul class="list-items">
                            <li ng-repeat="legacyQuestionnaire in legacyQuestionnaireList | filter: searchLegacyQuestionnairesFilter">
                              <label>
                                <input type="radio" ng-model="newLegacyQuestionnaire.legacy_questionnaire" ng-change="legacyQuestionnaireUpdate()" ng-value="legacyQuestionnaire" /> {{legacyQuestionnaire.name}}
                              </label>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>   
            <!-- SECTION: Title -->
            <div class="row animated" ng-class="{fadeInUp:titleSection.show}" ng-if="titleSection.show">
              <div class="col-xs-12 side-menu-title">
                <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                  <span style="background-color:#e6edfa; padding: 0 10px;">
                    <span class="fas fa-dot-circle"></span>
                    <h2>Title</h2>
                  </span>  
                </div>  
              </div>
            </div>   
            <div class="row animated" ng-class="{fadeInUp:titleSection.show}" ng-if="titleSection.show">
              <div class="col-xs-12">
                <p style="margin-bottom: 10px;">
                  <span style="color:#d9534f"><strong>Required field:</strong></span>
                  Please assign an english and french title.
                </p>
              </div>
            </div>  
            <div class="row animated" ng-class="{fadeInUp:titleSection.show}" ng-if="titleSection.show">
              <div class="col-xs-12 col-md-6">
                <div class="panel" ng-class="(newLegacyQuestionnaire.name_EN) ? 'panel-success': 'panel-danger'">
                  <div class="panel-heading"><strong>English</strong>
                    <span ng-hide="newLegacyQuestionnaire.name_EN" style="float:right"><em>Incomplete</em></span>
                    <span ng-show="newLegacyQuestionnaire.name_EN" style="float:right"><em>Complete</em></span>
                  </div>
                  <div class="panel-body form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12 col-lg-2">
                        Title
                      </label>
                      <div class="col-xs-12 col-lg-10">
                        <input class="form-control" type="text" ng-model="newLegacyQuestionnaire.name_EN" ng-change="titleUpdate()" placeholder="English Title" required="required">
                      </div>
                    </div>
                  </div>
                </div>
              </div>          
              <div class="col-xs-12 col-md-6">
                <div class="panel" ng-class="(newLegacyQuestionnaire.name_FR) ? 'panel-success': 'panel-danger'">
                  <div class="panel-heading"><strong>Français</strong>
                    <span ng-hide="newLegacyQuestionnaire.name_FR" style="float:right"><em>Incomplete</em></span>
                    <span ng-show="newLegacyQuestionnaire.name_FR" style="float:right"><em>Complete</em></span>
                  </div>
                  <div class="panel-body form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12 col-lg-2">
                        Titre
                      </label>
                      <div class="col-xs-12 col-lg-10">
                        <input class="form-control" type="text" ng-model="newLegacyQuestionnaire.name_FR" ng-change="titleUpdate()" placeholder="Titre Français" required="required">
                      </div>
                    </div>
                  </div>
                </div>
              </div>        
            </div>
            <!-- SECTION: Introduction Text -->
            <div class="row animated" ng-class="{fadeInUp: introSection.show}" ng-if="introSection.show">
              <div class="col-xs-12 side-menu-title">
                <div style="height: 10px; border-bottom:2px solid rgba(111, 84, 153, 0.8);">
                  <span style="background-color:#e6edfa; padding: 0 10px;">
                    <span class="fas fa-dot-circle"></span>
                    <h2>Introduction Text</h2>
                  </span>  
                </div>  
              </div>
            </div>   
            <div class="row animated" ng-class="{fadeInUp: introSection.show}" ng-if="introSection.show">
              <div class="col-xs-12">
                <p style="margin-bottom: 5px;">
                  <span style="color:#d9534f"><strong>Required field:</strong></span>
                  Please assign the introduction content in both english and in french.
                </p>
                <p style="margin-bottom: 5px;">
                  <span style="color:#d9534f"><strong>HTML exceptions</strong></span><br>
                  <ul style="margin-left: 15px; margin-bottom: 10px;">
                    <li>Add <strong>img-responsive</strong> class to img tags. Ex: 
                      <code data-lang="html">&lt;img class="img-responsive"&gt;</code> 
                    </li>
                    <li>No <strong>absolute</strong> measurements! Ie. 
                      <code data-lang="html">&lt;span style="width:200px"&gt;</code>
                    </li>
                  </ul>
                </p>
              </div>
            </div>  
            <div class="row animated" ng-class="{fadeInUp: introSection.show}" ng-if="introSection.show">
              <div class="col-xs-12">
                <div class="panel" ng-class="(newLegacyQuestionnaire.intro_EN) ? 'panel-success': 'panel-danger'">
                  <div class="panel-heading"><strong>English</strong>
                    <span ng-hide="newLegacyQuestionnaire.intro_EN" style="float:right"><em>Incomplete</em></span>
                    <span ng-show="newLegacyQuestionnaire.intro_EN" style="float:right"><em>Complete</em></span>
                  </div>
                  <div class="panel-body">
                    <div class="row">
                      <div class="col-xs-12 col-md-8">
                        <div class="form-group">
                          <div text-angular ng-model="newLegacyQuestionnaire.intro_EN" ng-change="introUpdate()"></div>
                        </div> 
                      </div>  
                      <div class="col-xs-12 col-md-4">
                        <div style="text-align:center;">
                          <span style="font-size:20px;">iPhone 4 Rendered</span>
                        </div>
                        <div class="render-html-iphone4"> 
                          <iframe height="100%" width="100%" srcdoc="{{newLegacyQuestionnaire.intro_EN | deliberatelyTrustAsHtml}}" frameborder="0"></iframe>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>           
            <div class="row animated" ng-class="{fadeInUp: introSection.show}" ng-if="introSection.show">
              <div class="col-xs-12">
                <div class="panel" ng-class="(newLegacyQuestionnaire.intro_FR) ? 'panel-success': 'panel-danger'">
                  <div class="panel-heading"><strong>Français</strong>
                    <span ng-hide="newLegacyQuestionnaire.intro_FR" style="float:right"><em>Incomplete</em></span>
                    <span ng-show="newLegacyQuestionnaire.intro_FR" style="float:right"><em>Complete</em></span>
                  </div>
                  <div class="panel-body">
                    <div class="row">
                      <div class="col-xs-12 col-md-8">
                        <div class="form-group">
                          <div text-angular ng-model="newLegacyQuestionnaire.intro_FR" ng-change="introUpdate()"></div>
                        </div> 
                      </div>  
                      <div class="col-xs-12 col-md-4">
                        <div style="text-align:center;">
                          <span style="font-size:20px;">iPhone 4 Rendered</span>
                        </div>
                        <div class="render-html-iphone4"> 
                          <iframe height="100%" width="100%" srcdoc="{{newLegacyQuestionnaire.intro_FR | deliberatelyTrustAsHtml}}" frameborder="0"></iframe>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>  
            <!-- SECTION: Publish frequency -->
            <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
              <div class="col-xs-12 side-menu-title">
                <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                  <span style="background-color:#e6edfa; padding: 0 10px;">
                    <span class="fas fa-dot-circle"></span>
                    <h2>Publish Frequency</h2>
                  </span>  
                </div>  
              </div>
            </div>   
            <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
              <div class="col-xs-12">
                <p style="margin-bottom: 10px;">
                  <span><strong>Optional field:</strong></span>
                  Select a frequency at which this questionnaire will be published.
                </p>
              </div>
            </div>  
            <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show" style="margin-bottom:10px;position:relative;z-index:50">
              <div style="margin-bottom:10px;">
                <div class="col-xs-12">
                  <button class="btn btn-success" ng-if="!showFrequency" ng-click="addFrequencyFilter()">
                    <span style="font-size: 17px;" class="fa fa-plus"></span>
                    <span style="font-size: 20px;"><strong>Add</strong></span>
                  </button>
                  <button class="btn btn-danger" ng-if="showFrequency" ng-click="removeFrequencyFilter()">
                    <span style="font-size: 17px;" class="glyphicon glyphicon-minus"></span>
                    <span style="font-size: 20px;"><strong>Remove</strong></span>
                  </button>
                </div>
              </div>
             
              <div class="col-xs-12" style="margin-bottom:10px;" ng-if="showFrequency">
                <div class="col-xs-12 col-sm-4">
                  <div class="form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12">
                        Repeat 
                      </label>
                      <div class="col-xs-8">
                        <select class="form-control" ng-options="presetFrequency as presetFrequency.name for presetFrequency in presetFrequencies track by presetFrequency.id" ng-model="frequencySelected" ng-change="selectFrequency(frequencySelected)">
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xs-12 col-sm-4">  
                  <div class="form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12">
                        Repeat Start
                      </label>
                      <div class="col-xs-12 col-lg-9">
                        <div class="input-group">
                          <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="newLegacyQuestionnaire.occurrence.start_date" ng-change="setChangesMade()" is-open="popupStart.opened"datepicker-options="dateOptionsStart" ng-required="true" close-text="Close" />
                          <span class="input-group-btn">
                            <button class="btn btn-default" ng-click="openStart($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xs-12 col-sm-4">  
                  <div class="form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12">
                        Repeat End
                      </label>
                      <div ng-if="!addEndDate" class="col-xs-12 col-lg-9">
                        <button class="btn btn-default" ng-click="toggleEndDate()">
                          <span class="fa fa-plus"></span>
                          <span><strong>Add End Date</strong></span>
                        </button>
                      </div>
                      <div class="col-xs-12 col-lg-9" style="margin-bottom:10px;">
                        <div class="input-group">
                          <input ng-if="addEndDate" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="newLegacyQuestionnaire.occurrence.end_date" ng-change="setChangesMade()" is-open="popupEnd.opened" datepicker-options="dateOptionsEnd" ng-required="true" close-text="Close" />
                          <span ng-if="addEndDate" class="input-group-btn">
                            <button class="btn btn-default" ng-click="openEnd($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                          </span>
                        </div>
                      </div>
                      <div class="col-xs-12">
                        <button class="btn btn-default" ng-if="addEndDate" ng-click="toggleEndDate()">
                          <span class="glyphicon glyphicon-minus"></span>
                          <span><strong>Remove End Date</strong></span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xs-12">
                <div class="col-xs-12 col-sm-4" ng-if="frequencySelected.id == 'custom'">
                  <div class="form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12">
                        Repeat Interval
                      </label>
                      <div class="col-xs-3">
                        <input class="form-control" ng-model="customFrequency.meta_value" type="number" max="59" min="1">
                      </div>
                      <div class="col-xs-6">
                        <select class="form-control" ng-options="unit as unit.name for unit in frequencyUnits track by unit.id" ng-model="customFrequency.unit" ng-change="selectRepeatInterval(customFrequency.unit)">
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xs-12 col-sm-4" ng-if="frequencySelected.id == 'custom' && customFrequency.unit.id != 'day'">
                  <div class="form-horizontal">
                    <div class="form-group">
                      <label class="control-label col-xs-12">
                        <span ng-if="customFrequency.unit.id == 'week'">Repeat On Day(s)</span>
                        <span ng-if="customFrequency.unit.id == 'month' || customFrequency.unit.id == 'year'">Repeat Options</span>
                      </label>
                      <div class="col-xs-8" style="margin-bottom: 10px;" ng-if="customFrequency.unit.id == 'week'">
                        <div ng-dropdown-multiselect="" options="daysInWeek" selected-model="selectedDaysInWeek" extra-settings="weekDropdownSettings" events="weekDropdownEvents"></div>
                      </div>
                      <div ng-if="customFrequency.unit.id == 'year'"class="col-xs-10" style="margin-bottom: 10px;">
                        <div ng-dropdown-multiselect="" options="monthsInYear" selected-model="selectedMonthsInYear" extra-settings="monthDropdownSettings" events="monthDropdownEvents"></div>
                      </div>
                      <div ng-if="customFrequency.unit.id == 'month'" class="col-xs-12" style="margin-bottom: 10px;">
                        <div class="btn-group btn-group-justified" role="group">
                          <div class="btn-group" role="group">
                            <button type="button" class="btn btn-default" ng-class="{active: repeatSub == 'onDate'}" ng-click="setRepeatSub('onDate')">On Date</button>
                          </div>
                          <div class="btn-group" role="group">
                            <button type="button" class="btn btn-default" ng-class="{active: repeatSub == 'onWeek'}" ng-click="setRepeatSub('onWeek')">On Week</button>
                          </div>
                        </div>
                      </div>
                      <div ng-if="repeatSub == 'onDate' && customFrequency.unit.id == 'month'" class="no-calendar-header col-xs-12" style="margin-bottom: 10px;">
                        <multiple-date-picker day-click="setChangesMade()" ng-model="selectedDatesInMonth" month="staticMonth"></multiple-date-picker>
                      </div>
                      <div ng-if="repeatSub == 'onWeek' || customFrequency.unit.id == 'year'" class="col-xs-4" style="margin-bottom: 10px;">
                        <select class="form-control" ng-options="week as week.name for week in weekNumbersInMonth track by week.id" ng-model="selectedWeekNumberInMonth" ng-change="selectWeekInMonth(selectedWeekNumberInMonth)" >
                        </select>
                      </div>
                      <div ng-if="repeatSub == 'onWeek' || customFrequency.unit.id == 'year'" class="col-xs-6" style="margin-bottom: 10px;">
                        <select class="form-control" ng-options="day as day.name for day in daysInWeek track by day.id" ng-model="selectedSingleDayInWeek" ng-change="selectDayInWeek(selectedSingleDayInWeek, customFrequency.unit.id)">
                          <option value="" selected="selected">---</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <!-- SECTION: Patient triggers -->
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 side-menu-title">
                  <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                    <span style="background-color:#e6edfa; padding: 0 10px;">
                      <span class="fas fa-dot-circle"></span>
                      <h2>Trigger to Send By Patient</h2>
                    </span>  
                  </div>  
                </div>
              </div>   
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12">
                  <p style="margin-bottom: 10px;">
                    <span><strong>Optional field:</strong></span>
                    Select one of more patient triggers below. This will target patients selected here. Press select all to send to all patients. Leave blank for no trigger. 
                  </p>
                </div>
              </div>  
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 col-lg-8">
                  <div class="panel-container">
                    <div class="panel-info">
                      <div class="panel-content">
                        <div class="panel-input">  
                          <div class="list-space">
                            <div class="input-group">
                              <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                              <input class="form-control" type="text" ng-model="patientSearchField" ng-change="searchPatient(patientSearchField)" placeholder="Search..."/>
                            </div>
                            <div style="padding: 10px;">
                              <label>
                                <input type="checkbox" ng-click="selectAllTriggers(patientTriggerList, searchPatientFilter, selectAll.patient)" ng-checked="selectAll.patient.checked"> Select All
                              </label>
                            </div>
                            <ul class="list-items">
                              <li ng-repeat="patient in patientTriggerList | filter: searchPatientFilter">
                                <label>
                                  <input type="checkbox" ng-click="selectTrigger(patient, selectAll.patient)" ng-checked="patient.added" /> {{patient.name}}
                                </label>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>  
            <!-- SECTION: Demographic triggers -->
            <div class="row animated" ng-class="{fadeInUp:demoSection.show }" ng-if="demoSection.show ">
              <div class="col-xs-12 side-menu-title">
                <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                  <span style="background-color:#e6edfa; padding: 0 10px;">
                    <span class="fas fa-dot-circle"></span>
                    <h2>Trigger to Send By Demographic</h2>
                  </span>  
                </div>  
              </div>
            </div>   
            <div class="row animated" ng-class="{fadeInUp:demoSection.show }" ng-if="demoSection.show ">
              <div class="col-xs-12">
                <p style="margin-bottom: 10px;">
                  <span><strong>Optional field:</strong></span>
                  Please assign a demographic trigger. Leave unmarked for no trigger.
                </p>
              </div>
            </div>  
            <div class="row animated" ng-class="{fadeInUp:demoSection.show }" ng-if="demoSection.show ">
              <div class="col-xs-12 col-md-6">
                <div class="row">
                  <h2 class="col-xs-12" style="margin:0 0 7px 0; padding: 0 15px; font-size:30px;">Sex</h2>
                </div>
                <div class="row">
                  <div ng-repeat="sex in sexes" class="col-xs-12 col-sm-6">
                    <div class="panel-container animated" style="cursor:pointer;" ng-class="{pulse: hover, active: demoTrigger.sex == sex.name}" ng-click="sexUpdate(sex)" ng-mouseenter="hover=true" ng-mouseleave="hover=false">
                      <div class="panel-info" ng-class="{active: demoTrigger.sex == sex.name}">
                        <div class="panel-content" style="text-align:center">
                          <span style="font-size:30px;" class="fa fa-{{sex.icon}}"></span>
                          <div class="option-panel-title">{{sex.name}}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xs-12 col-md-6">
                <div class="row">
                  <h2 class="col-xs-12" style="margin:0 0 7px 0; padding: 0 15px; font-size:30px;">Age Group</h2>
                </div>
                <div class="row">
                  <div class="col-xs-12 col-sm-6" style="margin-bottom: 10px;">
                    <div class="panel">
                      <div class="panel-body form-horizontal">
                        <div class="form-group">
                          <label class="control-label col-xs-12 col-lg-2">
                            MIN
                          </label>
                          <div class="col-xs-12 col-lg-10">
                            <input class="form-control" ng-model="demoTrigger.age.min" type="number" ng-change="ageUpdate()" ng-max="demoTrigger.age.max" min="0">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>          
                  <div class="col-xs-12 col-sm-6" style="margin-bottom: 10px;">
                    <div class="panel">
                      <div class="panel-body form-horizontal">
                        <div class="form-group">
                          <label class="control-label col-xs-12 col-lg-2">
                            MAX
                          </label>
                          <div class="col-xs-12 col-lg-10">
                            <input class="form-control" ng-model="demoTrigger.age.max" type="number" ng-change="ageUpdate()" max="100" ng-min="demoTrigger.age.min">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>  
                </div>
              </div>      
            </div>
            <!-- SECTION: Appointment Status trigger -->
            <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
              <div class="col-xs-12 side-menu-title">
                <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                  <span style="background-color:#e6edfa; padding: 0 10px;">
                    <span class="fas fa-dot-circle"></span>
                    <h2>Trigger to Send By Appointment Status</h2>
                  </span>
                </div>
              </div>
            </div>
            <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
              <div class="col-xs-12">
                <p style="margin-bottom: 10px;">
                  <span>
                    <strong>Optional field:</strong>
                  </span>
                  Select an appointment status. This will target patients with appointments having this status on the day of the appointment. Using this trigger with the appointment trigger below will target statuses for specific appointments.
                </p>
              </div>
            </div>
            <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
              <div ng-repeat="appointmentStatus in appointmentStatusList" class="col-xs-12 col-sm-4 col-md-3 item-panel-select">
                <div class="panel-container animated" style="cursor:pointer;" ng-class="{pulse: hover, active: appointmentStatus.added}" ng-click="appointmentStatusUpdate($index)" ng-mouseenter="hover=true" ng-mouseleave="hover=false">
                  <div class="panel-info" ng-class="{active: appointmentStatus.added}">
                    <div class="panel-content" style="text-align:center">
                      <span ng-if="!appointmentStatus.added" style="font-size:30px;" class="glyphicon glyphicon-minus"></span>
                      <span ng-if="appointmentStatus.added" style="font-size:30px;" class="glyphicon glyphicon-ok"></span>
                      <div class="option-panel-title">{{appointmentStatus.name}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>  
						<!-- SECTION: Appointment triggers -->
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 side-menu-title">
                  <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                    <span style="background-color:#e6edfa; padding: 0 10px;">
                      <span class="fas fa-dot-circle"></span>
                      <h2>Trigger to Send By Appointment</h2>
                    </span>  
                  </div>  
                </div>
              </div>   
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12">
                  <p style="margin-bottom: 10px;">
                    <span><strong>Optional field:</strong></span>
                    Select one of more appointment triggers below. This will target patients with these specific appointments. Press select all to trigger on all appointments. Leave blank for no trigger.
                  </p>
                </div>
              </div>  
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 col-lg-8">
                  <div class="panel-container">
                    <div class="panel-info">
                      <div class="panel-content">
                        <div class="panel-input">  
                          <div class="list-space">
                            <div class="input-group">
                              <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                              <input class="form-control" type="text" ng-model="appointmentSearchField" ng-change="searchAppointment(appointmentSearchField)" placeholder="Search..."/>
                            </div>
                            <div style="padding: 10px;">
                              <label>
                                <input type="checkbox" ng-click="selectAllTriggers(appointmentTriggerList, searchAppointmentFilter, selectAll.appointment)" ng-checked="selectAll.appointment.checked"> Select All
                              </label>
                            </div>
                            <ul class="list-items">
                              <li ng-repeat="appointment in appointmentTriggerList | filter: searchAppointmentFilter">
                                <label>
                                  <input type="checkbox" ng-click="selectTrigger(appointment, selectAll.appointment)" ng-checked="appointment.added" /> {{appointment.name}}
                                </label>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <!-- SECTION: Diagnosis trigger -->
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 side-menu-title">
                  <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                    <span style="background-color:#e6edfa; padding: 0 10px;">
                      <span class="fas fa-dot-circle"></span>
                      <h2>Trigger to Send By Diagnosis</h2>
                    </span>  
                  </div>  
                </div>
              </div>   
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12">
                  <p style="margin-bottom: 10px;">
                    <span><strong>Optional field:</strong></span>
                    Select one of more diagnosis triggers below. This will target patients with these specific diagnoses. Press select all to trigger on all diagnoses. Leave blank for no trigger.
                  </p>
                </div>
              </div>  
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 col-lg-8">
                  <div class="panel-container">
                    <div class="panel-info">
                      <div class="panel-content">
                        <div class="panel-input">  
                          <div class="list-space">
                            <div class="input-group">
                              <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                              <input class="form-control" type="text" ng-model="dxSearchField" ng-change="searchDiagnosis(dxSearchField)" placeholder="Search Diagnosis"/>
                            </div>
                            <div style="padding: 10px;">
                              <label>
                                <input type="checkbox" ng-click="selectAllTriggers(dxTriggerList, searchDxFilter, selectAll.diagnosis)" ng-checked="selectAll.diagnosis.checked"> Select All
                              </label>
                            </div>
                            <ul class="list-items">
                              <li ng-repeat="diagnosis in dxTriggerList | filter: searchDxFilter">
                                <label>
                                  <input type="checkbox" ng-click="selectTrigger(diagnosis, selectAll.diagnosis)" ng-checked="diagnosis.added" /> {{diagnosis.name}}
                                </label>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <!-- SECTION: Doctor triggers -->
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 side-menu-title">
                  <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                    <span style="background-color:#e6edfa; padding: 0 10px;">
                      <span class="fas fa-dot-circle"></span>
                      <h2>Trigger to Send By Doctor</h2>
                    </span>  
                  </div>  
                </div>
              </div>   
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12">
                  <p style="margin-bottom: 10px;">
                    <span><strong>Optional field:</strong></span>
                    Select one of more doctor triggers below. This will target patients with these specific doctors. Press select all to trigger on all doctors. Leave blank for no triggers.
                  </p>
                </div>
              </div>  
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 col-lg-8">
                  <div class="panel-container">
                    <div class="panel-info">
                      <div class="panel-content">
                        <div class="panel-input">  
                          <div class="list-space">
                            <div class="input-group">
                              <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                              <input class="form-control" type="text" ng-model="doctorSearchField" ng-change="searchDoctor(doctorSearchField)" placeholder="Search Doctor"/>
                            </div>
                            <div style="padding: 10px;">
                              <label>
                                <input type="checkbox" ng-click="selectAllTriggers(doctorTriggerList, searchDoctorFilter, selectAll.doctor)" ng-checked="selectAll.doctor.checked"> Select All
                              </label>
                            </div>
                            <ul class="list-items">
                              <li ng-repeat="doctor in doctorTriggerList | filter: searchDoctorFilter">
                                <label>
                                  <input type="checkbox" ng-click="selectTrigger(doctor, selectAll.doctor)" ng-checked="doctor.added" /> {{doctor.name}}
                                </label>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <!-- SECTION: Treatment machine triggers -->
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 side-menu-title">
                  <div style="height: 10px; border-bottom: 2px solid rgba(111, 84, 153, 0.8);">
                    <span style="background-color:#e6edfa; padding: 0 10px;">
                      <span class="fas fa-dot-circle"></span>
                      <h2>Trigger to Send By Treatment Machine</h2>
                    </span>  
                  </div>  
                </div>
              </div>   
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12">
                  <p style="margin-bottom: 10px;">
                    <span><strong>Optional field:</strong></span>
                    Select one of more machine triggers below. This will target patients with these specific treatment machines. Press select all to trigger on all treatment machines. Leave blank for no trigger.
                  </p>
                </div>
              </div>  
              <div class="row animated" ng-class="{fadeInUp: triggerSection.show}" ng-if="triggerSection.show">
                <div class="col-xs-12 col-lg-8">
                  <div class="panel-container">
                    <div class="panel-info">
                      <div class="panel-content">
                        <div class="panel-input">  
                          <div class="list-space">
                            <div class="input-group">
                              <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                              <input class="form-control" type="text" ng-model="machineSearchField" ng-change="searchMachine(machineSearchField)" placeholder="Search Machine"/>
                            </div>
                            <div style="padding: 10px;">
                              <label>
                                <input type="checkbox" ng-click="selectAllTriggers(machineTriggerList, searchMachineFilter, selectAll.machine)" ng-checked="selectAll.machine.checked"> Select All
                              </label>
                            </div>
                            <ul class="list-items">
                              <li ng-repeat="machine in machineTriggerList | filter: searchMachineFilter">
                                <label>
                                  <input type="checkbox" ng-click="selectTrigger(machine, selectAll.machine)" ng-checked="machine.added" /> {{machine.name}}
                                </label>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            <!-- END SECTION -->
          </div>
        </div>
      </div>
    </div>
<!-- "Processing" modal template -->
<script type="text/ng-template" id="processingModal.htm">
  <div class="modal-header">
    <h1> Processing...</h1>
  </div>
  <div class="modal-body">
    <div class="progress progress-striped active">
      <div class="progress-bar" style="width: 100%"></div>        
    </div>
  </div>
</script>


